using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Configuration;
using System.Data.SqlClient;

namespace Malware_FYPJ.Entity
{
    public class GetInfo
    {

        private string username;
        private string country;
        private string city;
        private string ip;
        private string time;
        private string comname;
        private string app;
        private string upload;
        private string download;


        // Encapsulated methods
        public string Username
        {
            get { return username; }
            set { username = value; }
        }
        public string Comname
        {
            get { return comname; }
            set { comname = value; }
        }
        public string Country
        {
            get { return country; }
            set { country = value; }
        }
        public string City
        {
            get { return city; }
            set { city = value; }
        }
        public string IP
        {
            get { return ip; }
            set { ip = value; }
        }
        public string Time
        {
            get { return time; }
            set { time = value; }
        }
        public string App
        {
            get { return app; }
            set { app = value; }
        }
        public string Upload
        {
            get { return upload; }
            set { upload = value; }
        }
        public string Download
        {
            get { return download; }
            set { download = value; }
        }

                // Constructors
        public GetInfo()
        {
        }

        public static void insertlog(GetInfo g)
        {
            string query = "INSERT INTO Logging VALUES (@user, @comname, @ip, @country, @city, @time, @app, @upload, @download)";
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["malwrConnectionString"].ToString());
            SqlCommand cmd = new SqlCommand(query, con);
            con.Open();
            cmd.Parameters.AddWithValue("@user", g.Username);
            cmd.Parameters.AddWithValue("@comname", g.Comname);
            cmd.Parameters.AddWithValue("@ip", g.IP);
            cmd.Parameters.AddWithValue("@country", g.Country);
            cmd.Parameters.AddWithValue("@city", g.City);
            cmd.Parameters.AddWithValue("@time", g.Time);
            cmd.Parameters.AddWithValue("@app", g.App);
            cmd.Parameters.AddWithValue("@upload", g.Upload);
            cmd.Parameters.AddWithValue("@download", g.Download);

            cmd.ExecuteNonQuery();
            con.Close();
        }

        }

    
}